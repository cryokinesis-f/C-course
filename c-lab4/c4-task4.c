/*
С клавиатуры вводятся два целых числа n и p(n>0, 2 ⩽ p⩽ 36). 
Напишите программу, которая выдает все n-значные числа в p-ичной записи. 
Для цифр после 9 используйте заглавные буквы латинского алфавита (как это принято, например, в 16-ричной
системе).
*/

#include <stdio.h>

// Печатает число value в системе счисления base с width цифрами (дополняя ведущими нулями)
void printInBase(int value, int base, int width) {
    // Набор символов для цифр от 0 до 35
    char digits[] = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    char buffer[64];  // Временный массив для хранения результата
    int index = 0;

    // Преобразуем число в p-ричную запись (в обратном порядке)
    do {
        buffer[index++] = digits[value % base];  // Берем последнюю цифру
        value /= base;                            // Переходим к следующей цифре
    } while (value > 0);

    // Дополняем ведущими нулями, если цифр меньше n
    while (index < width) {
        buffer[index++] = '0';
    }

    // Выводим цифры в правильном порядке (разворачиваем)
    for (int i = index - 1; i >= 0; --i) {
        putchar(buffer[i]);
    }
    putchar('\n');  // Перевод строки
}

// Возводит число base в степень exp (целочисленно)
int power(int base, int exp) {
    int result = 1;
    while (exp-- > 0)
        result *= base;
    return result;
}

int main() {
    int n, p;

    // Ввод n и p с клавиатуры
    printf("Введите количество цифр n и основание системы счисления p (2 <= p <= 36): ");
    scanf("%d %d", &n, &p);

    // Проверка корректности ввода
    if (n <= 0 || p < 2 || p > 36) {
        printf("Ошибка: некорректные значения n или p.\n");
        return 1;
    }

    // Вычисляем начало и конец диапазона: от p^(n-1) до p^n - 1
    int start = power(p, n - 1);
    int end = power(p, n) - 1;

    printf("Все %d-значные числа в %d-ричной системе:\n", n, p);

    // Перебираем и печатаем все числа в диапазоне
    for (int i = start; i <= end; ++i) {
        printInBase(i, p, n);
    }

    return 0;
}
